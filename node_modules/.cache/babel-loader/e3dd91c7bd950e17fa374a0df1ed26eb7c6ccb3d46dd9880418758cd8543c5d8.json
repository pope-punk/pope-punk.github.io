{"ast":null,"code":"var _jsxFileName = \"C:\\\\ApplicationDev\\\\pope-punk.github.io\\\\src\\\\components\\\\MatrixInput.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { isValidMatrix } from '../utils/matrixUtils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MatrixInput = ({\n  initialMatrix,\n  onSubmit,\n  customImages\n}) => {\n  _s();\n  const [matrix, setMatrix] = useState([[0, 0, 0], [0, 0, 0], [0, 0, 0]]);\n  const [error, setError] = useState('');\n  useEffect(() => {\n    if (initialMatrix && Array.isArray(initialMatrix) && initialMatrix.length === 3) {\n      setMatrix(initialMatrix);\n    }\n  }, [initialMatrix]);\n  const handleCellToggle = (ringIndex, diagIndex) => {\n    const newMatrix = JSON.parse(JSON.stringify(matrix));\n    newMatrix[ringIndex][diagIndex] = newMatrix[ringIndex][diagIndex] === 0 ? 2 : 0;\n    setMatrix(newMatrix);\n    setError(''); // Clear any previous error\n\n    // Auto-check validity on each toggle\n    if (isValidMatrix(newMatrix)) {\n      onSubmit(newMatrix);\n    }\n  };\n\n  // Get total pews placed\n  const totalPairs = matrix.flat().reduce((sum, val) => sum + (val === 2 ? 1 : 0), 0);\n  const innerRingPairs = matrix[0].reduce((sum, val) => sum + (val === 2 ? 1 : 0), 0);\n\n  // Apply custom styles if provided\n  const keypadStyle = customImages !== null && customImages !== void 0 && customImages.keypadBackground ? {\n    backgroundImage: `url(${customImages.keypadBackground})`\n  } : {};\n  const getButtonStyle = isPressed => {\n    if (isPressed) {\n      return customImages !== null && customImages !== void 0 && customImages.pressedButton ? {\n        backgroundImage: `url(${customImages.pressedButton})`\n      } : {};\n    } else {\n      return customImages !== null && customImages !== void 0 && customImages.unpressedButton ? {\n        backgroundImage: `url(${customImages.unpressedButton})`\n      } : {};\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"matrix-input\",\n    style: keypadStyle,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"matrix-grid\",\n      children: matrix.map((row, ringIndex) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"matrix-row\",\n        children: row.map((cell, diagIndex) => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `matrix-cell ${cell === 2 ? 'pressed' : ''}`,\n          onClick: () => handleCellToggle(ringIndex, diagIndex),\n          type: \"button\",\n          style: getButtonStyle(cell === 2),\n          \"aria-label\": `Toggle pew at ring ${ringIndex + 1}, diagonal ${diagIndex + 1}`,\n          \"aria-pressed\": cell === 2,\n          children: customImages !== null && customImages !== void 0 && customImages.buttonIcon && cell === 2 ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: customImages.buttonIcon,\n            alt: \"Pew\",\n            className: \"button-icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 19\n          }, this) : cell === 2 ? '●' : '○'\n        }, `cell-${ringIndex}-${diagIndex}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 15\n        }, this))\n      }, `ring-${ringIndex}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"matrix-status\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: isValidMatrix(matrix) ? /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"valid-config\",\n          children: \"Valid Configuration\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"invalid-config\",\n          children: totalPairs === 3 && innerRingPairs <= 1 ? \"Arrangement doesn't match church geometry\" : `Need ${3 - totalPairs} more pair${3 - totalPairs !== 1 ? 's' : ''} ${innerRingPairs > 1 ? '(max 1 on inner ring)' : ''}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n_s(MatrixInput, \"RV1/05rog0HS2AhopcblDPJSNB0=\");\n_c = MatrixInput;\nexport default MatrixInput;\nvar _c;\n$RefreshReg$(_c, \"MatrixInput\");","map":{"version":3,"names":["React","useState","useEffect","isValidMatrix","jsxDEV","_jsxDEV","MatrixInput","initialMatrix","onSubmit","customImages","_s","matrix","setMatrix","error","setError","Array","isArray","length","handleCellToggle","ringIndex","diagIndex","newMatrix","JSON","parse","stringify","totalPairs","flat","reduce","sum","val","innerRingPairs","keypadStyle","keypadBackground","backgroundImage","getButtonStyle","isPressed","pressedButton","unpressedButton","className","style","children","map","row","cell","onClick","type","buttonIcon","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/ApplicationDev/pope-punk.github.io/src/components/MatrixInput.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { isValidMatrix } from '../utils/matrixUtils';\r\n\r\nconst MatrixInput = ({ initialMatrix, onSubmit, customImages }) => {\r\n  const [matrix, setMatrix] = useState([\r\n    [0, 0, 0],\r\n    [0, 0, 0],\r\n    [0, 0, 0]\r\n  ]);\r\n  const [error, setError] = useState('');\r\n  \r\n  useEffect(() => {\r\n    if (initialMatrix && Array.isArray(initialMatrix) && initialMatrix.length === 3) {\r\n      setMatrix(initialMatrix);\r\n    }\r\n  }, [initialMatrix]);\r\n  \r\n  const handleCellToggle = (ringIndex, diagIndex) => {\r\n    const newMatrix = JSON.parse(JSON.stringify(matrix));\r\n    newMatrix[ringIndex][diagIndex] = newMatrix[ringIndex][diagIndex] === 0 ? 2 : 0;\r\n    setMatrix(newMatrix);\r\n    setError(''); // Clear any previous error\r\n    \r\n    // Auto-check validity on each toggle\r\n    if (isValidMatrix(newMatrix)) {\r\n      onSubmit(newMatrix);\r\n    }\r\n  };\r\n  \r\n  // Get total pews placed\r\n  const totalPairs = matrix.flat().reduce((sum, val) => sum + (val === 2 ? 1 : 0), 0);\r\n  const innerRingPairs = matrix[0].reduce((sum, val) => sum + (val === 2 ? 1 : 0), 0);\r\n  \r\n  // Apply custom styles if provided\r\n  const keypadStyle = customImages?.keypadBackground ? \r\n    { backgroundImage: `url(${customImages.keypadBackground})` } : {};\r\n    \r\n  const getButtonStyle = (isPressed) => {\r\n    if (isPressed) {\r\n      return customImages?.pressedButton ? \r\n        { backgroundImage: `url(${customImages.pressedButton})` } : {};\r\n    } else {\r\n      return customImages?.unpressedButton ? \r\n        { backgroundImage: `url(${customImages.unpressedButton})` } : {};\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div className=\"matrix-input\" style={keypadStyle}>\r\n      <div className=\"matrix-grid\">\r\n        {matrix.map((row, ringIndex) => (\r\n          <div key={`ring-${ringIndex}`} className=\"matrix-row\">\r\n            {row.map((cell, diagIndex) => (\r\n              <button\r\n                key={`cell-${ringIndex}-${diagIndex}`}\r\n                className={`matrix-cell ${cell === 2 ? 'pressed' : ''}`}\r\n                onClick={() => handleCellToggle(ringIndex, diagIndex)}\r\n                type=\"button\"\r\n                style={getButtonStyle(cell === 2)}\r\n                aria-label={`Toggle pew at ring ${ringIndex + 1}, diagonal ${diagIndex + 1}`}\r\n                aria-pressed={cell === 2}\r\n              >\r\n                {customImages?.buttonIcon && cell === 2 ? (\r\n                  <img \r\n                    src={customImages.buttonIcon} \r\n                    alt=\"Pew\" \r\n                    className=\"button-icon\" \r\n                  />\r\n                ) : (\r\n                  cell === 2 ? '●' : '○'\r\n                )}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        ))}\r\n      </div>\r\n      \r\n      <div className=\"matrix-status\">\r\n        <div>\r\n          {isValidMatrix(matrix) ? \r\n            <span className=\"valid-config\">Valid Configuration</span> : \r\n            <span className=\"invalid-config\">{totalPairs === 3 && innerRingPairs <= 1 ? \r\n              \"Arrangement doesn't match church geometry\" : \r\n              `Need ${3-totalPairs} more pair${3-totalPairs !== 1 ? 's' : ''} ${innerRingPairs > 1 ? '(max 1 on inner ring)' : ''}`}\r\n            </span>\r\n          }\r\n        </div>\r\n      </div>\r\n      \r\n      {error && <div className=\"error-message\">{error}</div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MatrixInput;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}